<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSABot Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-okaidia.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="sidebar">
        <div class="sidebar-header">
            <h2>Contents</h2>
        </div>
        <ul class="nav-links">
            <li><a href="#getting-started" class="nav-link">Getting Started</a></li>
            <li><a href="#running-locally" class="nav-link">Running Locally</a></li>
            <li><a href="#setup" class="nav-link">Setup</a></li>
            <li>
                <a href="#commands" class="nav-link">Commands</a>
                <ul class="sub-links">
                    <li><a href="#cmd-resources" class="nav-link sub-link">Resources</a></li>
                    <li><a href="#cmd-problem" class="nav-link sub-link">Random Problem</a></li>
                    <li><a href="#cmd-algorithm" class="nav-link sub-link">Random Algorithm</a></li>
                    <li><a href="#cmd-leaderboard" class="nav-link sub-link">Leaderboard</a></li>
                    <li><a href="#cmd-repo" class="nav-link sub-link">Repository</a></li>
                </ul>
            </li>
            <li><a href="#apis" class="nav-link">APIs</a></li>
            <li><a href="#faq" class="nav-link">FAQ</a></li>
        </ul>
    </nav>

    <main class="content">
        <header>
            <h1>DSABot Documentation</h1>
        </header>

        <section id="getting-started">
            <h2>Getting Started</h2>
            <p>Welcome to DSABot! This bot is designed to help Discord communities learn and practice Data Structures and Algorithms together.</p>
            <p>DSABot provides various features including practice problems, resource sharing, and community engagement tools to make learning DSA more interactive and fun.</p>
        </section>

        <section id="running-locally">
            <h2>Running Locally</h2>
            <p>To run DSABot locally, you'll need Python 3.8+ and pip installed on your system. Follow the setup instructions below to get started with your own copy of the bot.</p>
            <p>Make sure you have a Discord Developer account and have created a bot application in the Discord Developer Portal before proceeding.</p>
        </section>

        <section id="setup">
            <h2>Setup</h2>
            <p>Follow these steps to set up the bot:</p>
            <pre><code class="language-python">
# Clone the repository
git clone https://github.com/kashsuks/DSABot

# Install dependencies
pip install -r requirements.txt

# Configure environment variables in the `.env` file
DISCORD_TOKEN = 'your discord token'
KATTIS_USERNAME = 'your kattis username'
KATTIS_PASSWORD = 'your kattis passowrd'
            </code></pre>
        </section>

        <section id="commands">
            <h2>Commands</h2>
            
            <section id="cmd-resources">
                <h3>Resources Command</h3>
                <p>This command gives me the resources that I use to practice DSA</p>
                <pre><code class="language-python">
@bot.tree.command(name="resources", description="Resources used to learn competitve programming")
async def resources(interaction: Interaction):
    await interaction.response.send_message(f"Here are some competitive programming resources:\n https://cp-algorithms.com/index.html \n https://xlinux.nist.gov/dads/")
                </code></pre>
            </section>

            <section id="cmd-problem">
                <h3>Practice Command</h3>
                <p>Generates practice problems based on difficulty level and topic.</p>
                <pre><code class="language-python">
@bot.tree.command(name="random-problem", description="Gives a random problem from Kattis")
async def random_problem(interaction: Interaction):
    await interaction.response.defer()
    try:
        kt = OpenKattis(os.getenv('KATTIS_USERNAME'), os.getenv('KATTIS_PASSWORD'))
        problems = kt.suggest()
        if not problems:
            await interaction.followup.send("No problems found. Please try again later.")
            return

        problem = random.choice(problems)
        name = problem.get('name', 'Unknown')
        difficulty = problem.get('difficulty', 'Unknown')
        link = problem.get('link', 'No link available')

        await interaction.followup.send(f"Here is a Kattis problem for you to try:\n**Name:** {name}\n**Difficulty:** {difficulty}\n**Link:** {link}")
    except Exception as e:
        await interaction.followup.send("An error occurred while fetching a problem from Kattis.")
        print(e)
                </code></pre>
            </section>

            <section id="cmd-algorithm">
                <h3>Random Algorithm</h3>
                <p>Gives a random algorithm for you to learn.</p>
                <pre><code class="language-python">
@bot.tree.command(name="random-algo", description="Get a random algorithm to learn")
async def random_algo(interaction: Interaction):
    algorithm = random.choice(ALGORITHMS)
    await interaction.response.send_message(f"Learn about this algorithm: {algorithm}")
                </code></pre>
            </section>

            <section id="cmd-leaderboard">
                <h3>Leaderboard Command (Coming Soon)</h3>
                <p>Displays server-wide rankings based on codeforces rating.</p>
                <pre><code class="language-python">
@bot.tree.command(name="leaderboard", description="Show the top 10 Codeforces users in the server")
async def leaderboard(interaction: Interaction):
    try:
        conn = await asyncpg.connect(DATABASE_URL)
        rows = await conn.fetch("""
            SELECT discord_id, codeforces_handle, rating 
            FROM user_handles 
            ORDER BY rating DESC
        """)
        await conn.close()
        
        leaderboardEmbed = Embed(
            title="Codeforces Leaderboard",
            color=Colour.blue()
        )
        description = ""

        for i, row in enumerate(rows[:10], start=1):
            description += f"**#{i}** {row['codeforces_handle']} --> {row['rating']}\n"

        leaderboardEmbed.description = description

        userRank = None
        for i, row in enumerate(rows, start=1):
            if row['discord_id'] == interaction.user.id:
                userRank = i
                break

        if userRank:
            leaderboardEmbed.add_field(
                name="Your Rank",
                value=f"**#{userRank}** {interaction.user.mention}",
                inline=False
            )
        else:
            leaderboardEmbed.add_field(
                name="Your Rank",
                value="You are not on the leaderboard.",
                inline=False
            )

        await interaction.response.send_message(embed=leaderboardEmbed)
    except Exception as e:
        await interaction.response.send_message(f"An error occurred while fetching the leaderboard: {e}")
                </code></pre>
            </section>

            <section id="cmd-repo">
                <h3>Github Repository Link</h3>
                <p>Displays the Github repository link of the Discord Bot.</p>
                <pre><code class="language-python">
@bot.tree.command(name="repo", description="Send the link to my GitHub repository")
async def repo(interaction: Interaction):
    await interaction.response.send_message(f"Here is the link to my GitHub repo: {GITHUB_REPO_URL}")
                </code></pre>
            </section>
        </section>

        <section id="apis">
            <h2>APIs</h2>
            <p>DSABot integrates with various APIs to provide a comprehensive learning experience. The bot uses LeetCode's API for problem fetching and verification, and maintains its own API for user progress tracking.</p>
        </section>

        <section id="faq">
            <h2>FAQ</h2>
            <p>Common questions and troubleshooting tips for DSABot:</p>
            <p>1. How do I add the bot to my server?</p>
            <p>2. Can I customize the difficulty levels?</p>
            <p>3. How does the scoring system work?</p>
        </section>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-python.min.js"></script>
    <script src="script.js"></script>
</body>
</html>